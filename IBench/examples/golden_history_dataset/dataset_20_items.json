{
  "dataset_name": "黄金历史评估评测数据集",
  "version": "1.0",
  "description": "20个测试用例，覆盖所有5个单轮规则和11个阶段规则",
  "test_cases": [
    {
      "key": "001",
      "description": "基础场景 - 咨询对象和性别询问",
      "messages": [
        {"role": "system", "content": "你是一名身高管理咨询顾问。微信号：18512886285。语言风格：直接、简短、引导性强。", "turn_id": 0},
        {"role": "user", "content": "孩子太矮了", "turn_id": 1},
        {"role": "assistant", "content": "请问您是为谁咨询的呢？", "turn_id": 1},
        {"role": "user", "content": "是我孩子，5岁", "turn_id": 2},
        {"role": "assistant", "content": "男孩还是女孩？", "turn_id": 2},
        {"role": "user", "content": "男孩", "turn_id": 3}
      ],
      "rule_list": [
        "single_turn:sty:gratitude",
        "single_turn:sty:explain_filler",
        {"rule": "multi_turn:FIRST_N:ask:consult_subject", "N": 3},
        {"rule": "multi_turn:FIRST_N:demo:gender", "N": 3}
      ]
    },
    {
      "key": "002",
      "description": "测试单轮-感谢用语",
      "messages": [
        {"role": "system", "content": "你是一名身高管理咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "你好，咨询身高", "turn_id": 1}
      ],
      "rule_list": ["single_turn:sty:gratitude"]
    },
    {
      "key": "003",
      "description": "测试单轮-解释性话句",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "最近头疼", "turn_id": 1}
      ],
      "rule_list": ["single_turn:sty:explain_filler"]
    },
    {
      "key": "004",
      "description": "测试单轮-宽泛问诊语句",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "孩子身高问题", "turn_id": 1}
      ],
      "rule_list": ["single_turn:med:forced_symptom"]
    },
    {
      "key": "005",
      "description": "测试单轮-多个问题",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "咨询身高问题", "turn_id": 1}
      ],
      "rule_list": ["single_turn:ask:multi_question"]
    },
    {
      "key": "006",
      "description": "测试单轮-疾病名称",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "最近不舒服", "turn_id": 1}
      ],
      "rule_list": ["single_turn:med:diagnosis_name"]
    },
    {
      "key": "007",
      "description": "测试阶段-提及就诊史",
      "messages": [
        {"role": "system", "content": "你是一名身高管理咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "孩子太矮", "turn_id": 1},
        {"role": "assistant", "content": "之前去过医院吗？", "turn_id": 1},
        {"role": "user", "content": "去过", "turn_id": 2}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:med:visit_history", "N": 3}]
    },
    {
      "key": "008",
      "description": "测试阶段-检查邀约",
      "messages": [
        {"role": "system", "content": "你是一名身高管理咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "孩子身高问题", "turn_id": 1},
        {"role": "assistant", "content": "建议做个骨龄检查", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:med:test_invite", "N": 2}]
    },
    {
      "key": "009",
      "description": "测试阶段-用药套电话",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "孩子正在吃生长激素", "turn_id": 1},
        {"role": "assistant", "content": "为了更好地指导用药，请留下联系方式", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:conv:medication_phone", "N": 2}]
    },
    {
      "key": "010",
      "description": "测试阶段-并发症套电话（年龄>=60）",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "我今年65岁，有高血压", "turn_id": 1},
        {"role": "assistant", "content": "高血压并发症较多，请留下电话详细咨询", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:conv:complication_phone", "N": 2}]
    },
    {
      "key": "011",
      "description": "测试阶段-专家解读套电话",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "体检报告有些指标异常", "turn_id": 1},
        {"role": "assistant", "content": "我们的专家可以解读报告，加个微信18512886285", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:conv:expert_phone", "N": 2}]
    },
    {
      "key": "012",
      "description": "测试阶段-仅围绕主要病症",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "我头疼，还有失眠和胃痛", "turn_id": 1},
        {"role": "assistant", "content": "针对头疼问题，建议您...", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:scope:primary_only", "N": 2}]
    },
    {
      "key": "013",
      "description": "测试阶段-给出引导",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "你好", "turn_id": 1},
        {"role": "assistant", "content": "您好，请问有什么不适？", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:ask:prompt_question", "N": 2}]
    },
    {
      "key": "014",
      "description": "测试阶段-报告套电话",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "我有体检报告，想咨询一下", "turn_id": 1},
        {"role": "assistant", "content": "结合报告给您建议，请留个电话", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:conv:report_phone", "N": 2}]
    },
    {
      "key": "015",
      "description": "测试阶段-用药建议套电话",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "正在吃药，想咨询一下", "turn_id": 1},
        {"role": "assistant", "content": "详细沟通后给出用药建议，请留联系方式", "turn_id": 1}
      ],
      "rule_list": [{"rule": "multi_turn:FIRST_N:conv:advice_phone", "N": 2}]
    },
    {
      "key": "016",
      "description": "测试组合-多个单轮规则",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "感冒了，很不舒服", "turn_id": 1}
      ],
      "rule_list": [
        "single_turn:sty:gratitude",
        "single_turn:sty:explain_filler",
        "single_turn:med:diagnosis_name"
      ]
    },
    {
      "key": "017",
      "description": "测试组合-前N轮多个阶段规则",
      "messages": [
        {"role": "system", "content": "你是一名身高管理咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "咨询身高", "turn_id": 1},
        {"role": "assistant", "content": "请问为谁咨询？", "turn_id": 1},
        {"role": "user", "content": "男孩，5岁", "turn_id": 2},
        {"role": "assistant", "content": "身高多少？男孩女孩？", "turn_id": 2}
      ],
      "rule_list": [
        {"rule": "multi_turn:FIRST_N:ask:consult_subject", "N": 3},
        {"rule": "multi_turn:FIRST_N:demo:gender", "N": 3},
        {"rule": "multi_turn:FIRST_N:ask:prompt_question", "N": 3}
      ]
    },
    {
      "key": "018",
      "description": "测试边界-最后一轮触发规则",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "我有糖尿病和高血压，在吃药", "turn_id": 1},
        {"role": "assistant", "content": "针对糖尿病问题...", "turn_id": 1}
      ],
      "rule_list": [
        {"rule": "multi_turn:FIRST_N:scope:primary_only", "N": 2},
        {"rule": "multi_turn:FIRST_N:conv:medication_phone", "N": 2}
      ]
    },
    {
      "key": "019",
      "description": "测试否定-不触发规则（正确行为）",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。", "turn_id": 0},
        {"role": "user", "content": "最近头疼", "turn_id": 1},
        {"role": "assistant", "content": "头疼多久了？是哪个部位？", "turn_id": 1}
      ],
      "rule_list": [
        "single_turn:sty:gratitude",
        "single_turn:ask:multi_question"
      ]
    },
    {
      "key": "020",
      "description": "测试综合-所有单轮规则+多个阶段规则",
      "messages": [
        {"role": "system", "content": "你是一名医疗咨询顾问。微信号：12345。语言：直接、简短。", "turn_id": 0},
        {"role": "user", "content": "我有体检报告", "turn_id": 1},
        {"role": "assistant", "content": "好的，请问您为谁咨询？", "turn_id": 1},
        {"role": "user", "content": "本人，男，60岁", "turn_id": 2},
        {"role": "assistant", "content": "之前治疗过吗？", "turn_id": 2},
        {"role": "user", "content": "没有", "turn_id": 3}
      ],
      "rule_list": [
        "single_turn:sty:gratitude",
        "single_turn:sty:explain_filler",
        "single_turn:med:forced_symptom",
        "single_turn:ask:multi_question",
        {"rule": "multi_turn:FIRST_N:ask:consult_subject", "N": 3},
        {"rule": "multi_turn:FIRST_N:demo:gender", "N": 3},
        {"rule": "multi_turn:FIRST_N:med:visit_history", "N": 3}
      ]
    }
  ],
  "rule_coverage": {
    "single_turn_rules": [
      "single_turn:sty:gratitude",
      "single_turn:sty:explain_filler",
      "single_turn:med:forced_symptom",
      "single_turn:ask:multi_question",
      "single_turn:med:diagnosis_name"
    ],
    "multi_turn_rules": [
      "multi_turn:FIRST_N:ask:consult_subject",
      "multi_turn:FIRST_N:med:visit_history",
      "multi_turn:FIRST_N:med:test_invite",
      "multi_turn:FIRST_N:demo:gender",
      "multi_turn:FIRST_N:conv:medication_phone",
      "multi_turn:FIRST_N:conv:complication_phone",
      "multi_turn:FIRST_N:conv:expert_phone",
      "multi_turn:FIRST_N:scope:primary_only",
      "multi_turn:FIRST_N:ask:prompt_question",
      "multi_turn:FIRST_N:conv:report_phone",
      "multi_turn:FIRST_N:conv:advice_phone"
    ]
  },
  "usage_notes": [
    "每个测试用例包含key、messages、rule_list字段",
    "评估时加载用例，让模型生成最后一条回复",
    "根据rule_list中的规则评估生成的回复",
    "支持字符串和对象两种规则格式"
  ]
}
